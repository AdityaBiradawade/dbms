# Import the MongoDB public GPG key
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -

# Create the list file for MongoDB
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# Update packages
sudo apt-get update

# Install MongoDB
sudo apt-get install -y mongodb-org

# Start and enable MongoDB service
sudo systemctl enable --now mongod

sudo apt-get install python3-pip -y
pip3 install pymongo

from pymongo import MongoClient

# Connect to MongoDB
client = MongoClient("mongodb://jack:Strong@password@localhost:27017/")
db = client.library
collection = db.employee  # Collection is like a table

# Ask user what they want to do
print("What do you want to do?")
print("1. Insert")
print("2. Update")
print("3. Delete")
choice = input("Enter choice (1/2/3): ")

if choice == "1":
    # INSERT
    name = input("Type a name: ")
    address = input("Type an address: ")
    doc = {"name": name, "address": address}
    result = collection.insert_one(doc)
    print(f"Record inserted with id {result.inserted_id}")

elif choice == "2":
    # UPDATE
    name = input("Enter the name of the employee to update: ")
    new_address = input("Enter the new address: ")
    result = collection.update_one(
        {"name": name},
        {"$set": {"address": new_address}}
    )
    print(f"{result.modified_count} record(s) updated.")

elif choice == "3":
    # DELETE
    name = input("Enter the name of the employee to delete: ")
    result = collection.delete_one({"name": name})
    print(f"{result.deleted_count} record(s) deleted.")

else:
    print("Invalid choice. Please enter 1, 2, or 3.")

# Close connection
client.close()
